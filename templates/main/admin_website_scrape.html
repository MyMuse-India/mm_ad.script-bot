{% extends "base.html" %}

{% block title %}MyMuse Website Scraper{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-globe me-2"></i>
                        MyMuse Website Scraper
                    </h3>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h6 class="alert-heading">What This Does:</h6>
                        <p class="mb-0">
                            This tool scrapes the MyMuse website to extract product descriptions, customer reviews, 
                            testimonials, and other content that can be used as training data for script generation.
                            The scraper automatically handles age verification and extracts rich content from the website.
                        </p>
                    </div>

                    <form method="POST" id="scrapeForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="url" class="form-label">Website URL</label>
                                    <input type="url" class="form-control" id="url" name="url" 
                                           value="https://mymuse.in/collections/deal-of-the-day" required>
                                    <div class="form-text">
                                        The MyMuse page to scrape (default: Deal of the Day)
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="product_name" class="form-label">Product Name</label>
                                    <input type="text" class="form-control" id="product_name" name="product_name" 
                                           value="mymuse" required>
                                    <div class="form-text">
                                        Product name for training data (default: mymuse)
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="submit" class="btn btn-primary" id="scrapeBtn">
                                <span class="spinner-border spinner-border-sm me-2 d-none" role="status" aria-hidden="true"></span>
                                <i class="fas fa-download me-2"></i>
                                Start Scraping
                            </button>
                        </div>
                    </form>

                    <div class="mt-4">
                        <h6>What Gets Scraped:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check text-success me-2"></i>Product descriptions and features</li>
                            <li><i class="fas fa-check text-success me-2"></i>Customer reviews and ratings</li>
                            <li><i class="fas fa-check text-success me-2"></i>Customer testimonials</li>
                            <li><i class="fas fa-check text-success me-2"></i>Product categories and pricing</li>
                            <li><i class="fas fa-check text-success me-2"></i>Website content and copy</li>
                        </ul>
                    </div>

                    <div class="mt-4">
                        <h6>Features:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-shield-alt text-info me-2"></i>Automatic age verification handling</li>
                            <li><i class="fas fa-robot text-info me-2"></i>Smart content extraction with fallbacks</li>
                            <li><i class="fas fa-database text-info me-2"></i>Automatic import into training index</li>
                            <li><i class="fas fa-clock text-info me-2"></i>Configurable scraping intervals</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('scrapeForm').addEventListener('submit', function(e) {
    const btn = document.getElementById('scrapeBtn');
    const spinner = btn.querySelector('.spinner-border');
    const icon = btn.querySelector('.fas');
    
    // Show loading state
    btn.disabled = true;
    spinner.classList.remove('d-none');
    icon.classList.add('d-none');
    btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Scraping...';
});
</script>
{% endblock %}
